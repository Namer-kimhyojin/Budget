import{c as he,j as e,m as C,a as x,t as ue,h as k,M as G,_ as V}from"./index-BO6clO3M.js";import{E as Y}from"./EmptyState-BTfvDnOD.js";import{S as fe}from"./search-Pi_eS4a4.js";import{P as me}from"./pen-vMj-PJ6A.js";import{T as ge,X as ye,C as be}from"./x-xTXLXG3D.js";const je=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ve=he("user-plus",je),Se=l=>String(l||"").toLowerCase(),J=l=>l?Se(l.org_type)==="team"||l.parent!==null&&l.parent!==void 0&&l.parent!=="":!1,we=l=>l?!J(l):!1,K=(l=[])=>l.filter(we),Z=(l=[],a)=>a?l.filter(o=>J(o)&&String(o.parent)===String(a)):[],F=(l=[],a)=>a==null||a===""?"":l.find(i=>String(i.id)===String(a))?.name||"",{menuPanelCard:Ee,menuPanelHead:ze,menuPanelBody:ke,rowInline:H,simpleInput:R,simpleSelect:T,menuGhostBtn:Re}=C,Ce=[{value:"STAFF",label:"부서담당자"},{value:"MANAGER",label:"총무팀"},{value:"ADMIN",label:"시스템 관리자"},{value:"ORG_VIEWER",label:"열람자"}];function Ie({newUser:l,setNewUser:a,createUser:o,orgs:i}){const h=K(i),u=Z(i,l.organization);return e.jsxs("section",{style:Ee,children:[e.jsx("div",{style:ze,children:e.jsx("span",{children:"신규 사용자 등록"})}),e.jsxs("div",{style:{...ke,gap:10},children:[e.jsxs("div",{style:H,children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:["아이디 ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{style:{...R,width:"100%"},placeholder:"아이디 입력 (영문/숫자)",value:l.username,onChange:s=>a(r=>({...r,username:s.target.value}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:["비밀번호 ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{style:{...R,width:"100%"},placeholder:"초기 비밀번호",type:"password",value:l.password,onChange:s=>a(r=>({...r,password:s.target.value}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:"이름"}),e.jsx("input",{style:{...R,width:"100%"},placeholder:"사용자 성명",value:l.name,onChange:s=>a(r=>({...r,name:s.target.value}))})]})]}),e.jsxs("div",{style:H,children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:"이메일"}),e.jsx("input",{style:{...R,width:"100%"},placeholder:"user@example.com",value:l.email,onChange:s=>a(r=>({...r,email:s.target.value}))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:"역할(권한)"}),e.jsx("select",{style:{...T,width:"100%"},value:l.role,onChange:s=>a(r=>({...r,role:s.target.value})),children:Ce.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:"소속 부서"}),e.jsxs("select",{style:{...T,width:"100%"},value:l.organization,onChange:s=>a(r=>({...r,organization:s.target.value,team:""})),children:[e.jsx("option",{value:"",children:"부서 미지정 (공통/본점 등)"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{display:"block",fontSize:"11px",color:"#64748b",marginBottom:4},children:"소속 팀"}),e.jsxs("select",{style:{...T,width:"100%"},value:l.team||"",onChange:s=>a(r=>({...r,team:s.target.value})),disabled:!l.organization,children:[e.jsx("option",{value:"",children:"팀 선택 (옵션)"}),u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",marginLeft:8},children:e.jsxs("button",{style:{...Re,background:"#3b82f6",color:"#fff",border:"none",height:38},type:"button",onClick:o,children:[e.jsx(ve,{size:14,style:{marginRight:6}})," 사용자 생성"]})})]})]})]})}const{menuPanelCard:_e,menuPanelHead:Te,menuPanelBody:Be,simpleInput:Oe,simpleTable:Ae,simpleTh:m,simpleTd:g,menuGhostBtn:Q}=C,We={ADMIN:"시스템 관리자",MANAGER:"총무팀",STAFF:"부서담당자",REVIEWER:"총무팀",REQUESTOR:"부서담당자",ORG_VIEWER:"열람자"};function Me({filteredUsers:l,searchTerm:a,setSearchTerm:o,openEditModal:i,removeUser:h,orgs:u}){const s=t=>t.organization_name||F(u,t.organization),r=t=>t.team_name||F(u,t.team);return e.jsxs("section",{style:{..._e,padding:0},children:[e.jsxs("div",{style:{...Te,justifyContent:"space-between",flexWrap:"wrap",gap:10,padding:"16px 20px",borderBottom:"1px solid #e2e8f0",background:"#f8fafc",margin:0},children:[e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#1e293b"},children:"사용자 목록"}),e.jsxs("div",{style:{position:"relative",width:280},children:[e.jsx(fe,{size:14,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{style:{...Oe,paddingLeft:36,width:"100%"},placeholder:"이름 또는 아이디로 검색...",value:a,onChange:t=>o(t.target.value)})]})]}),e.jsx("div",{style:{...Be,padding:0},children:l.length===0?e.jsx("div",{style:{padding:40},children:e.jsx(Y,{title:"사용자가 없습니다",description:a?"검색 결과가 없습니다.":"등록된 사용자가 없습니다."})}):e.jsx("div",{style:{overflowX:"auto",padding:"0 20px 20px 20px"},children:e.jsxs("table",{style:{...Ae,tableLayout:"fixed",minWidth:"100%",borderTop:"none",marginTop:16},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:60}}),e.jsx("col",{style:{width:140}}),e.jsx("col",{style:{width:140}}),e.jsx("col",{style:{width:120}}),e.jsx("col",{}),e.jsx("col",{style:{width:140}}),e.jsx("col",{style:{width:80}}),e.jsx("col",{style:{width:130}})]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"No."}),e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"아이디"}),e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"이름"}),e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"역할"}),e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"부서"}),e.jsx("th",{style:{...m,padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"팀"}),e.jsx("th",{style:{...m,textAlign:"center",padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"상태"}),e.jsx("th",{style:{...m,textAlign:"right",padding:"12px 16px",background:"#f8fafc",borderTop:"1px solid #e2e8f0",borderBottom:"2px solid #e2e8f0"},children:"관리"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap"},children:t.id}),e.jsx("td",{style:{...g,padding:"12px 16px",fontWeight:600,color:"#0f172a",whiteSpace:"nowrap"},children:t.username}),e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap"},children:t.name||"-"}),e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap"},children:e.jsx("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:12,fontSize:"11px",fontWeight:600,background:t.role==="ADMIN"?"#eff6ff":t.role==="MANAGER"||t.role==="REVIEWER"?"#f0fdf4":"#f8fafc",color:t.role==="ADMIN"?"#1d4ed8":t.role==="MANAGER"||t.role==="REVIEWER"?"#15803d":"#64748b",border:"1px solid",borderColor:t.role==="ADMIN"?"#bfdbfe":t.role==="MANAGER"||t.role==="REVIEWER"?"#bbf7d0":"#e2e8f0"},children:We[t.role]||t.role})}),e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.organization&&s(t)||"",children:t.organization?s(t)||"알 수 없음":e.jsx("span",{style:{color:"#cbd5e1"},children:"-"})}),e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.team&&r(t)||"",children:t.team?r(t)||"알 수 없음":e.jsx("span",{style:{color:"#cbd5e1"},children:"-"})}),e.jsx("td",{style:{...g,textAlign:"center",padding:"12px 16px",whiteSpace:"nowrap"},children:t.is_active?e.jsx("span",{style:{color:"#16a34a",fontWeight:700,fontSize:"11px"},children:"활성"}):e.jsx("span",{style:{color:"#ef4444",fontWeight:700,fontSize:"11px"},children:"차단"})}),e.jsx("td",{style:{...g,padding:"12px 16px",whiteSpace:"nowrap"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6},children:[e.jsxs("button",{style:{...Q,padding:"4px 8px"},type:"button",onClick:()=>i(t),children:[e.jsx(me,{size:12,style:{marginRight:4}})," 수정"]}),e.jsx("button",{style:{...Q,color:"#ef4444",padding:"4px 8px"},type:"button",onClick:()=>h(t.id),children:e.jsx(ge,{size:12})})]})})]},t.id))})]})})})]})}const{simpleInput:B,simpleSelect:O}=C,Ne=[{value:"STAFF",label:"부서담당자"},{value:"MANAGER",label:"총무팀"},{value:"ADMIN",label:"시스템 관리자"},{value:"ORG_VIEWER",label:"열람자"}];function Le({isOpen:l,onClose:a,editForm:o,setEditForm:i,handleUpdateUser:h,orgs:u}){if(!l||!o)return null;const s=K(u),r=Z(u,o.organization);return e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:a,children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"480px",boxShadow:"0 10px 25px -5px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",gap:16},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #e2e8f0",paddingBottom:16},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:700,color:"#0f172a"},children:"사용자 정보 수정"}),e.jsx("button",{onClick:a,style:{background:"none",border:"none",cursor:"pointer",color:"#94a3b8"},children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:["아이디 ",e.jsx("span",{style:{fontWeight:400,color:"#94a3b8"},children:"(변경불가)"})]}),e.jsx("div",{style:{padding:"10px 12px",background:"#f1f5f9",borderRadius:6,color:"#64748b",fontSize:"14px",fontWeight:600},children:o.username})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:"이름"}),e.jsx("input",{style:{...B,width:"100%",boxSizing:"border-box"},value:o.name,onChange:t=>i(d=>({...d,name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:"이메일"}),e.jsx("input",{style:{...B,width:"100%",boxSizing:"border-box"},value:o.email,onChange:t=>i(d=>({...d,email:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:"역할"}),e.jsx("select",{style:{...O,width:"100%",boxSizing:"border-box"},value:o.role,onChange:t=>i(d=>({...d,role:t.target.value})),children:Ne.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:"소속 부서"}),e.jsxs("select",{style:{...O,width:"100%",boxSizing:"border-box"},value:o.organization,onChange:t=>i(d=>({...d,organization:t.target.value,team:""})),children:[e.jsx("option",{value:"",children:"부서 미지정"}),s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:"소속 팀"}),e.jsxs("select",{style:{...O,width:"100%",boxSizing:"border-box"},value:o.team||"",onChange:t=>i(d=>({...d,team:t.target.value})),disabled:!o.organization,children:[e.jsx("option",{value:"",children:"팀 선택 (옵션)"}),r.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsxs("label",{style:{display:"block",fontSize:"12px",fontWeight:600,color:"#475569",marginBottom:6},children:["비밀번호 변경 ",e.jsx("span",{style:{fontWeight:400,color:"#94a3b8"},children:"(필요 시 입력)"})]}),e.jsx("input",{type:"password",placeholder:"새 비밀번호 입력",style:{...B,width:"100%",boxSizing:"border-box"},value:o.password,onChange:t=>i(d=>({...d,password:t.target.value}))})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",gap:8,marginTop:4},children:[e.jsx("input",{type:"checkbox",id:"editIsActive",style:{width:16,height:16,margin:0},checked:o.is_active,onChange:t=>i(d=>({...d,is_active:t.target.checked}))}),e.jsx("label",{htmlFor:"editIsActive",style:{fontSize:"14px",color:"#0f172a",fontWeight:600,cursor:"pointer"},children:"계정 활성화 여부"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:16,paddingTop:16,borderTop:"1px solid #e2e8f0"},children:[e.jsx("button",{onClick:a,style:{padding:"10px 18px",border:"1px solid #e2e8f0",borderRadius:"6px",background:"#fff",fontSize:"13px",fontWeight:600,cursor:"pointer",color:"#64748b"},children:"취소"}),e.jsxs("button",{onClick:h,style:{padding:"10px 24px",border:"none",borderRadius:"6px",background:"#3b82f6",fontSize:"13px",fontWeight:700,cursor:"pointer",color:"#fff",display:"flex",alignItems:"center",gap:6},children:[e.jsx(be,{size:16})," 변경사항 저장"]})]})]})})}function Pe({isOpen:l,onClose:a,handleImportFile:o,importLoading:i,downloadTemplate:h}){return l?e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"400px",boxShadow:"0 4px 16px rgba(0,0,0,0.2)"},children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"16px"},children:"사용자 일괄 임포트"}),e.jsx("div",{style:{fontSize:"13px",color:"#64748b",marginBottom:"16px"},children:"Excel 파일을 선택하여 여러 사용자를 한 번에 임포트할 수 있습니다."}),e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:o,disabled:i,style:{width:"100%",padding:"8px",border:"1px solid #cbd5e1",borderRadius:"4px",marginBottom:"16px"}}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:a,disabled:i,style:{padding:"8px 16px",border:"1px solid #cbd5e1",borderRadius:"4px",backgroundColor:"#f8fafc",cursor:"pointer",fontSize:"13px"},children:"취소"}),e.jsx("button",{type:"button",onClick:h,style:{padding:"8px 16px",border:"none",borderRadius:"4px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"13px"},children:"템플릿 다운로드"})]})]})}):null}const{menuPanelCard:X,menuPanelHead:q,menuPanelBody:U}=C,$e={ADMIN:"시스템 관리자",MANAGER:"총무팀",STAFF:"부서담당자",REVIEWER:"총무팀",REQUESTOR:"부서담당자",ORG_VIEWER:"단순 조회자"};function Xe({menuId:l,user:a,authAxios:o,modalApi:i,orgs:h=[]}){const u=a?.role==="ADMIN",s={ADMIN:"모든 메뉴 접근 가능. 회차 생성/관리, 사용자 및 권한 관리.",MANAGER:"전체 부서 예산 확인 및 편집. 수정요청·버전 마감 가능.",STAFF:"본인 부서 예산 편성·편집. 작성완료·질문·답변 등록 가능.",ORG_VIEWER:"대시보드와 보고서 조회만 가능."},[r,t]=x.useState([]),[d,A]=x.useState(!1),[w,ee]=x.useState(""),[j,W]=x.useState({username:"",password:"",name:"",email:"",role:"REQUESTOR",organization:"",team:""}),[te,ne]=x.useState(null),[f,M]=x.useState(null),[le,I]=x.useState(!1),[ie,_]=x.useState(!1),[se,N]=x.useState(!1),y=x.useCallback(async()=>{if(u){A(!0);try{const n=await o.get("/api/auth/users/"),c=Array.isArray(n.data)?n.data:ue(n.data);t(c)}catch(n){await i.alert(k(n,"사용자 목록 조회에 실패했습니다."))}finally{A(!1)}}},[o,u,i]);x.useEffect(()=>{y()},[y]);const ae=x.useMemo(()=>{if(!w.trim())return r;const n=w.toLowerCase();return r.filter(c=>c.username.toLowerCase().includes(n)||c.name&&c.name.toLowerCase().includes(n))},[r,w]),oe=async()=>{if(!j.username||!j.password)return i.alert("아이디와 비밀번호는 필수입니다.");try{const n={...j,organization:j.organization||null,team:j.team||null};await o.post("/api/auth/users/",n),W({username:"",password:"",name:"",email:"",role:"REQUESTOR",organization:"",team:""}),await y(),await i.alert("사용자가 생성되었습니다.")}catch(n){await i.alert(k(n,"사용자 생성에 실패했습니다."))}},re=n=>{ne(n),M({username:n.username,name:n.name||"",email:n.email||"",role:n.role||"REQUESTOR",organization:n.organization||"",team:n.team||"",is_active:n.is_active,password:""}),I(!0)},de=async()=>{if(f)try{const n={name:f.name,email:f.email,role:f.role,organization:f.organization||null,team:f.team||null,is_active:f.is_active};f.password&&f.password.trim()&&(n.reset_password=f.password.trim()),await o.patch(`/api/auth/users/${te.id}/`,n),await y(),I(!1),await i.alert("사용자 정보가 수정되었습니다.")}catch(n){await i.alert(k(n,"사용자 수정에 실패했습니다."))}},ce=async n=>{if(await i.confirm("해당 사용자를 삭제하시겠습니까?"))try{await o.delete(`/api/auth/users/${n}/`),await y(),await i.alert("사용자가 삭제되었습니다.")}catch(v){await i.alert(k(v,"사용자 삭제에 실패했습니다."))}},L=async()=>{const n=await V(()=>import("./xlsx-CNerDvZX.js"),[]),c=[{username:"user001",password:"password123",name:"홍길동",email:"hong@example.com",role:"STAFF",organization:"",team:""},{username:"user002",password:"password456",name:"김영희",email:"kim@example.com",role:"MANAGER",organization:"",team:""}],v=n.utils.json_to_sheet(c),E=n.utils.book_new();n.utils.book_append_sheet(E,v,"사용자"),n.writeFile(E,"사용자_임포트_템플릿.xlsx")},pe=async n=>{const c=await V(()=>import("./xlsx-CNerDvZX.js"),[]),v=n.target.files?.[0];if(v){N(!0);try{const E=await v.arrayBuffer(),P=c.read(E,{type:"array"}),xe=P.Sheets[P.SheetNames[0]],z=c.utils.sheet_to_json(xe);if(z.length===0){await i.alert("임포트할 사용자가 없습니다.");return}const b=[];if(z.forEach((p,S)=>{p.username||b.push(`${S+2}행: 아이디 필수`),p.password||b.push(`${S+2}행: 비밀번호 필수`),(!p.role||!["ADMIN","MANAGER","STAFF","ORG_VIEWER"].includes(p.role))&&b.push(`${S+2}행: 유효한 역할 필수 (ADMIN/MANAGER/STAFF/ORG_VIEWER)`)}),b.length>0){await i.alert(`검증 오류:
${b.slice(0,5).join(`
`)}${b.length>5?`
외 ${b.length-5}건`:""}`);return}if(!await i.confirm(`${z.length}명의 사용자를 임포트하시겠습니까?`))return;let $=0,D=0;for(const p of z)try{const S={username:p.username,password:p.password,name:p.name||"",email:p.email||"",role:p.role||"REQUESTOR",organization:p.organization||null,team:p.team||null};await o.post("/api/auth/users/",S),$+=1}catch{D+=1}await i.alert(`임포트 완료: 성공 ${$}명, 실패 ${D}명`),await y(),_(!1)}catch{await i.alert("Excel 파일 읽기에 실패했습니다.")}finally{N(!1),n.target.value=""}}};return u?e.jsxs(G,{menuId:l,user:a,actions:[{label:"목록 새로고침",onClick:y,disabled:d,icon:e.jsx("div",{style:{width:14,height:14,background:"currentColor",borderRadius:"50%"}})},{label:"일괄 임포트",onClick:()=>_(!0)},{label:"템플릿 다운로드",onClick:L}],stats:[{label:"전체 사용자",value:`${r.length}명`}],children:[e.jsx(Ie,{newUser:j,setNewUser:W,createUser:oe,orgs:h}),e.jsx(Me,{filteredUsers:ae,searchTerm:w,setSearchTerm:ee,openEditModal:re,removeUser:ce,orgs:h}),e.jsx(Le,{isOpen:le,onClose:()=>I(!1),editForm:f,setEditForm:M,handleUpdateUser:de,orgs:h}),e.jsx(Pe,{isOpen:ie,onClose:()=>_(!1),handleImportFile:pe,importLoading:se,downloadTemplate:L})]}):e.jsxs(G,{menuId:l,user:a,stats:[{label:"권한",value:"ADMIN 필요"}],children:[e.jsxs("section",{style:X,children:[e.jsx("div",{style:q,children:"접근 제한"}),e.jsx("div",{style:U,children:e.jsx(Y,{title:"관리자만 접근할 수 있습니다",description:"사용자 관리 기능은 시스템 관리자(ADMIN) 권한이 필요합니다."})})]}),e.jsxs("section",{style:X,children:[e.jsx("div",{style:q,children:"역할별 설명"}),e.jsx("div",{style:U,children:Object.entries(s).map(([n,c])=>e.jsxs("div",{style:{padding:"10px",backgroundColor:"#f8fafc",borderRadius:"6px",borderLeft:"3px solid #3b82f6",marginBottom:"8px"},children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"13px",color:"#1e40af",marginBottom:"4px"},children:[$e[n]," ",e.jsxs("span",{style:{fontSize:"11px",color:"#94a3b8",fontWeight:400},children:["(",n,")"]})]}),e.jsx("div",{style:{fontSize:"12px",color:"#475569"},children:c})]},n))})]})]})}export{Xe as default};
