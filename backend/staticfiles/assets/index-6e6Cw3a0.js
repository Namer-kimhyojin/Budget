import{c as X,j as e,a as f,L as Ye,m as me,f as we,S as Xe,e as Ke,g as Ze,R as De,M as Je,h as U}from"./index-BO6clO3M.js";import{C as Ne,a as Qe,E as We,D as Ce,L as et,b as tt,P as nt}from"./paperclip-Ci_Aqpye.js";import{F as je,P as $e,T as it}from"./triangle-alert-DabJyciX.js";import{C as ge,T as ce,X as st}from"./x-xTXLXG3D.js";import{P as Le}from"./pen-vMj-PJ6A.js";import{S as rt}from"./StatusBadge-B8Rlc5dm.js";import{D as lt,T as ot}from"./trending-up-D59wfHlc.js";import{C as at}from"./chevron-down-D123M5_P.js";const dt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ct=X("arrow-left",dt);const ft=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],pt=X("arrow-up-down",ft);const ut=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Me=X("calendar",ut);const xt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],he=X("circle-pause",xt);const gt=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],be=X("circle-play",gt);const ht=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],bt=X("hash",ht);const yt=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],mt=X("layout-grid",yt);const jt=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],St=X("list",jt);const kt=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_t=X("square-check-big",kt);function ve({isOpen:t,onClose:r,title:i,children:S,footer:x,width:k=500}){return t?e.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:20},children:e.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:16,width:"100%",maxWidth:k,boxShadow:"0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:800,color:"#0f172a"},children:i}),e.jsx("button",{onClick:r,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#94a3b8",lineHeight:1},children:"×"})]}),e.jsx("div",{style:{padding:"24px",overflowY:"auto",flex:1},children:S}),x&&e.jsx("div",{style:{padding:"16px 24px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"flex-end",gap:12,backgroundColor:"#f8fafc",borderBottomLeftRadius:16,borderBottomRightRadius:16},children:x})]})}):null}const{simpleSelect:wt}=me,fe={DRAFT:{label:"대기중",color:"#64748b",bg:"#f1f5f9",border:"#e2e8f0",dot:"#94a3b8"},PENDING:{label:"접수중",color:"#1d4ed8",bg:"#eff6ff",border:"#bfdbfe",dot:"#3b82f6"},EXPIRED:{label:"접수마감",color:"#c2410c",bg:"#ffedd5",border:"#fdba74",dot:"#f97316"},CONFIRMED:{label:"확정",color:"#065f46",bg:"#ecfdf5",border:"#a7f3d0",dot:"#10b981"},CLOSED:{label:"마감",color:"#92400e",bg:"#fffbeb",border:"#fde68a",dot:"#f59e0b"}},Re={DRAFT:1,PENDING:2,EXPIRED:3,CONFIRMED:4,CLOSED:5},Te=t=>["PENDING","DRAFT","EXPIRED"].includes(String(t||"").toUpperCase()),ne=t=>{if(!t)return 0;const r=new Date(t).getTime();return Number.isFinite(r)?r:0};function ue(t,r){const i=Te(t.status)?1:0,S=Te(r.status)?1:0;return S!==i?S-i:r.year!==t.year?r.year-t.year:(r.round||0)!==(t.round||0)?(r.round||0)-(t.round||0):String(t.id).localeCompare(String(r.id))}function ye(t){if(!t)return null;const r=new Date(t);r.setHours(23,59,59,999);const i=Math.ceil((r-Date.now())/864e5);return i===0?{label:"D-Day",color:"#dc2626",bg:"#fef2f2",border:"#fca5a5"}:i>0&&i<=3?{label:`D-${i}`,color:"#ea580c",bg:"#fff7ed",border:"#fed7aa"}:i>0&&i<=7?{label:`D-${i}`,color:"#ca8a04",bg:"#fefce8",border:"#fde68a"}:i>0?{label:`D-${i}`,color:"#16a34a",bg:"#f0fdf4",border:"#bbf7d0"}:{label:`D+${Math.abs(i)}`,color:"#94a3b8",bg:"#f1f5f9",border:"#e2e8f0"}}function Ct({item:t,rank:r,canManage:i,handleGoDetail:S,setVersion:x,setIsEditModalOpen:k,handleCloseVersion:P,handleReopenVersion:p,handleDeleteVersion:B,progressData:$,summaryVersionId:b,isSelected:o,onToggleSelect:y}){const w=t.status==="PENDING"||t.status==="DRAFT"||t.status==="EXPIRED",R=t.status==="CLOSED",z=fe[t.status]||fe.DRAFT,F=ye(t.end_date),D=f.useMemo(()=>{if(!$?.length||b!==t.id)return null;const T=$.length;if(!T)return null;const E=$.filter(u=>u.dept_status==="COMPLETED").length,L=$.filter(u=>["WRITING","SUBMITTED"].includes(u.dept_status)).length;return{total:T,completed:E,inProgress:L,pct:Math.round(E/T*100)}},[$,b,t.id]);return e.jsxs("div",{style:{background:"#fff",borderRadius:16,border:w?`2px solid ${z.border}`:"1px solid #e2e8f0",boxShadow:w?"0 4px 20px rgba(37,99,235,0.10), 0 1px 4px rgba(0,0,0,0.04)":"0 1px 4px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column",overflow:"hidden",transition:"box-shadow 0.2s, transform 0.2s",opacity:R?.72:1,position:"relative"},onMouseEnter:T=>{T.currentTarget.style.boxShadow="0 8px 30px rgba(0,0,0,0.10)",T.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:T=>{T.currentTarget.style.boxShadow=w?"0 4px 20px rgba(37,99,235,0.10)":"0 1px 4px rgba(0,0,0,0.04)",T.currentTarget.style.transform="none"},children:[e.jsx("div",{style:{height:4,background:w?"linear-gradient(90deg, #2563eb, #60a5fa)":z.dot,borderRadius:"16px 16px 0 0"}}),i&&e.jsx("div",{onClick:T=>{T.stopPropagation(),y()},style:{position:"absolute",top:12,left:12,zIndex:10,width:24,height:24,borderRadius:6,background:o?"#2563eb":"rgba(255,255,255,0.9)",border:`2px solid ${o?"#2563eb":"#cbd5e1"}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:o?"0 2px 8px rgba(37,99,235,0.3)":"0 2px 4px rgba(0,0,0,0.05)",transition:"all 0.2s"},children:o&&e.jsx(ge,{size:14,color:"#fff",strokeWidth:4})}),e.jsxs("div",{style:{padding:"18px 20px",flex:1,display:"flex",flexDirection:"column",gap:12,paddingLeft:i?40:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:8},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",letterSpacing:"0.06em",marginBottom:2},children:[t.year,"년도 · ",r,"번째 예산"]}),e.jsx("div",{style:{fontSize:17,fontWeight:900,color:"#0f172a",lineHeight:1.2},children:t.name})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:4,flexShrink:0},children:[e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:11,fontWeight:700,padding:"3px 9px",borderRadius:999,background:z.bg,color:z.color,border:`1px solid ${z.border}`},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:z.dot,display:"inline-block"}}),z.label]}),w&&F&&e.jsx("span",{style:{fontSize:11,fontWeight:800,padding:"2px 8px",borderRadius:999,background:F.bg,color:F.color,border:`1px solid ${F.border}`},children:F.label})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"#64748b"},children:[e.jsx(Me,{size:13,style:{flexShrink:0}}),t.start_date?e.jsxs("span",{children:[e.jsx("b",{style:{color:"#334155"},children:t.start_date})," ~ ",e.jsx("b",{style:{color:"#334155"},children:t.end_date})]}):e.jsx("span",{style:{color:"#cbd5e1"},children:"기간 미설정"})]}),t.guidelines&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11,color:"#2563eb",background:"#eff6ff",border:"1px solid #bfdbfe",borderRadius:6,padding:"4px 10px",alignSelf:"flex-start"},children:[e.jsx(je,{size:11})," 작성 지침 있음"]}),D&&e.jsxs("div",{style:{marginTop:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"#64748b",marginBottom:5},children:[e.jsx("span",{children:"부서 편성 현황"}),e.jsxs("span",{style:{fontWeight:800,color:D.pct===100?"#059669":"#2563eb"},children:[D.completed,"/",D.total," (",D.pct,"%)"]})]}),e.jsx("div",{style:{height:6,borderRadius:99,background:"#f1f5f9",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:D.pct===100?"linear-gradient(90deg,#10b981,#059669)":"linear-gradient(90deg,#60a5fa,#2563eb)",width:`${D.pct}%`,transition:"width 0.5s ease"}})}),e.jsxs("div",{style:{display:"flex",gap:10,marginTop:5,fontSize:11},children:[e.jsxs("span",{style:{color:"#059669",fontWeight:700},children:["✓ 완료 ",D.completed]}),e.jsxs("span",{style:{color:"#d97706",fontWeight:700},children:["⏳ 진행 ",D.inProgress]}),e.jsxs("span",{style:{color:"#94a3b8"},children:["○ 미시작 ",D.total-D.completed-D.inProgress]})]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",padding:"10px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,background:"#fafbfc"},children:[e.jsx("div",{style:{flex:1}}),e.jsxs("div",{style:{display:"flex",gap:4,flexShrink:0},children:[e.jsx(G,{title:"상세 보기",color:"#2563eb",bg:"#eff6ff",onClick:()=>S(t),children:e.jsx(We,{size:13})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"수정",color:"#0369a1",bg:"#f0f9ff",onClick:()=>{x(t),k(!0)},children:e.jsx(Le,{size:13})}),R?e.jsx(G,{title:"마감 해제",color:"#059669",bg:"#ecfdf5",onClick:()=>p(t),children:e.jsx(be,{size:13})}):e.jsx(G,{title:"회차 마감",color:"#b45309",bg:"#fffbeb",onClick:()=>P(t),children:e.jsx(he,{size:13})}),e.jsx(G,{title:"삭제",color:"#dc2626",bg:"#fef2f2",onClick:()=>B(t),children:e.jsx(ce,{size:13})})]})]})]})]})}function G({children:t,title:r,color:i,bg:S,onClick:x}){const[k,P]=f.useState(!1);return e.jsx("button",{title:r,onClick:x,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),style:{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${k?i:"#e2e8f0"}`,borderRadius:8,background:k?S:"#fff",color:k?i:"#64748b",cursor:"pointer",transition:"all 0.15s"},children:t})}function vt({versions:t,setVersion:r,canManage:i,statusById:S,handleGoDetail:x,setIsEditModalOpen:k,handleCloseVersion:P,handleReopenVersion:p,handleDeleteVersion:B,setIsCreateModalOpen:$,progressData:b=[],summaryVersionId:o,handleBatchDelete:y,handleBatchUpdateStatus:w}){const[R,z]=f.useState([]),F=s=>{z(d=>d.includes(s)?d.filter(g=>g!==s):[...d,s])},D=()=>{R.length===t.length&&t.length>0?z([]):z(t.map(s=>s.id))},T=f.useMemo(()=>t.find(s=>s.id===o)||t.find(s=>s.status==="PENDING")||t.find(s=>s.status==="DRAFT")||null,[t,o]),E=T?ye(T.end_date):null,L=f.useMemo(()=>{if(!b.length)return{completed:0,inProgress:0,notStarted:0,total:0};const s=b.filter(h=>h.dept_status==="COMPLETED").length,d=b.filter(h=>["WRITING","SUBMITTED"].includes(h.dept_status)).length,g=b.filter(h=>["NOT_STARTED","EMPTY"].includes(h.dept_status)).length;return{completed:s,inProgress:d,notStarted:g,total:b.length}},[b]),u=f.useMemo(()=>{const s={DRAFT:0,PENDING:0,CONFIRMED:0,CLOSED:0};return t.forEach(d=>{const g=String(S[d.id]||d.status||"").toUpperCase();s[g]!==void 0&&s[g]++}),{total:t.length,...s}},[t,S]),a=f.useMemo(()=>b.reduce((s,d)=>s+Number(d.total_entries||0),0),[b]),j=f.useMemo(()=>b.reduce((s,d)=>s+Number(d.total_amount||0),0),[b]),[m,v]=f.useState("card"),[W,M]=f.useState("active_year"),[_,O]=f.useState("desc"),I=[{value:"active_year",label:"기본(활성/연도)"},{value:"year",label:"연도"},{value:"round",label:"회차"},{value:"name",label:"예산명"},{value:"status",label:"상태"},{value:"start_date",label:"시작일"},{value:"end_date",label:"종료일"},{value:"created_at",label:"생성일"}],K=()=>O(s=>s==="asc"?"desc":"asc"),N=s=>{if(W===s){K();return}M(s),O("desc")},V=s=>W===s?_==="asc"?" ^":" v":" -",re=f.useMemo(()=>{const s=[...t];return s.sort((d,g)=>{let h=0;if(W==="active_year")return h=ue(d,g),_==="asc"?-h:h;switch(W){case"year":h=Number(d.year||0)-Number(g.year||0);break;case"round":h=Number(d.round||0)-Number(g.round||0);break;case"name":h=String(d.name||"").localeCompare(String(g.name||""),"ko");break;case"status":h=Number(Re[d.status]||99)-Number(Re[g.status]||99);break;case"start_date":h=ne(d.start_date)-ne(g.start_date);break;case"end_date":h=ne(d.end_date)-ne(g.end_date);break;case"created_at":h=ne(d.created_at)-ne(g.created_at);break;default:return h=ue(d,g),_==="asc"?-h:h}return h===0&&(h=ue(d,g)),_==="asc"?h:-h}),s},[t,_,W]),pe=f.useMemo(()=>{const s={},d={};return t.forEach(g=>{d[g.year]||(d[g.year]=[]),d[g.year].push(g)}),Object.keys(d).forEach(g=>{d[g].sort((h,te)=>(h.round||0)-(te.round||0)||String(h.id).localeCompare(String(te.id))),d[g].forEach((h,te)=>s[h.id]=te+1)}),s},[t]),q={textAlign:"left",borderBottom:"1px solid #e2e8f0",color:"#64748b",fontWeight:700,padding:"10px 12px",fontSize:12,background:"#f8fafc",whiteSpace:"nowrap"},H={...q,cursor:"pointer",userSelect:"none"},A={borderBottom:"1px solid #f1f5f9",padding:"10px 12px",color:"#334155",fontSize:13,verticalAlign:"middle"};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:14},children:[e.jsx(xe,{icon:e.jsx(Ye,{size:18,style:{color:"#6366f1"}}),iconBg:"#eef2ff",label:"전체 예산 회차",value:`${u.total}개`,sub:e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px 10px",marginTop:6},children:[e.jsxs(oe,{color:"#94a3b8",children:["대기 ",u.DRAFT||0]}),e.jsxs(oe,{color:"#3b82f6",children:["접수 ",u.PENDING||0]}),e.jsxs(oe,{color:"#f97316",children:["접수마감 ",u.EXPIRED||0]}),e.jsxs(oe,{color:"#f59e0b",children:["마감 ",u.CLOSED||0]})]})}),e.jsx(xe,{icon:e.jsx(Ne,{size:18,style:{color:"#10b981"}}),iconBg:"#ecfdf5",label:"부서 편성 현황",value:L.total>0?`${L.completed} / ${L.total}`:"—",sub:L.total>0?e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{height:5,borderRadius:99,background:"#e2e8f0",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:"linear-gradient(90deg,#10b981,#059669)",width:`${Math.round(L.completed/L.total*100)}%`,transition:"width 0.4s"}})}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:5,fontSize:11},children:[e.jsxs("span",{style:{color:"#059669",fontWeight:700},children:["완료 ",L.completed]}),e.jsxs("span",{style:{color:"#d97706",fontWeight:700},children:["진행 ",L.inProgress]}),e.jsxs("span",{style:{color:"#94a3b8"},children:["미시작 ",L.notStarted]})]})]}):e.jsx("span",{style:{fontSize:12,color:"#94a3b8",marginTop:4,display:"block"},children:"데이터 없음"})}),e.jsx(xe,{icon:e.jsx(je,{size:18,style:{color:"#f59e0b"}}),iconBg:"#fffbeb",label:"집계 항목 / 금액",value:`${a.toLocaleString()}건`,sub:e.jsx("div",{style:{fontSize:12,color:"#64748b",marginTop:6,fontWeight:600},children:j>0?`${j.toLocaleString()}원`:e.jsx("span",{style:{color:"#94a3b8"},children:"집계 전"})})}),e.jsxs("div",{style:{background:E?E.bg:"#f8fafc",border:`1px solid ${E?E.border:"#e2e8f0"}`,borderRadius:14,padding:"16px 20px",boxShadow:"0 1px 3px rgba(15,23,42,0.05)",display:"flex",flexDirection:"column",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,fontSize:11,fontWeight:700,color:E?E.color:"#94a3b8",letterSpacing:"0.04em"},children:[e.jsx(Qe,{size:13})," 마감 기한"]}),e.jsx("div",{style:{fontSize:32,fontWeight:900,color:E?E.color:"#94a3b8",lineHeight:1,marginTop:2},children:E?E.label:"—"}),e.jsx("div",{style:{fontSize:12,color:E?E.color:"#94a3b8",opacity:.85,marginTop:2},children:T?.end_date?new Date(T.end_date).toLocaleDateString("ko-KR"):"기간 미설정"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14,gap:12,flexWrap:"wrap"},children:[e.jsxs("h3",{style:{margin:0,fontSize:15,fontWeight:800,color:"#0f172a"},children:["예산서 목록",e.jsxs("span",{style:{marginLeft:8,fontSize:12,fontWeight:600,color:"#94a3b8"},children:["(",t.length,")"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"inline-flex",border:"1px solid #cbd5e1",borderRadius:10,overflow:"hidden",background:"#fff"},children:[e.jsxs("button",{type:"button",onClick:()=>v("card"),style:{border:"none",padding:"8px 10px",background:m==="card"?"#eff6ff":"#fff",color:m==="card"?"#1d4ed8":"#64748b",fontWeight:700,fontSize:12,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:5},title:"카드 보기",children:[e.jsx(mt,{size:14})," 카드"]}),e.jsxs("button",{type:"button",onClick:()=>v("list"),style:{border:"none",borderLeft:"1px solid #e2e8f0",padding:"8px 10px",background:m==="list"?"#eff6ff":"#fff",color:m==="list"?"#1d4ed8":"#64748b",fontWeight:700,fontSize:12,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:5},title:"목록 보기",children:[e.jsx(St,{size:14})," 목록"]})]}),e.jsx("select",{value:W,onChange:s=>M(s.target.value),style:{...wt,minWidth:190,fontSize:12,padding:"8px 10px"},title:"정렬 항목",children:I.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsxs("button",{type:"button",onClick:K,style:{border:"1px solid #cbd5e1",borderRadius:8,background:"#fff",padding:"8px 10px",fontSize:12,fontWeight:700,color:"#334155",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6},title:"정렬 방향 전환",children:[e.jsx(pt,{size:13}),_==="asc"?"오름차순":"내림차순"]}),i&&e.jsxs("button",{onClick:()=>$(!0),style:{display:"inline-flex",alignItems:"center",gap:6,padding:"8px 16px",borderRadius:10,background:"linear-gradient(135deg,#2563eb,#3b82f6)",color:"#fff",border:"none",cursor:"pointer",fontSize:13,fontWeight:700,boxShadow:"0 2px 8px rgba(37,99,235,0.25)"},children:[e.jsx($e,{size:14})," 신규 예산서 접수"]})]})]}),t.length===0?e.jsx("div",{style:{textAlign:"center",padding:"48px 24px",background:"#fff",borderRadius:16,border:"1px dashed #e2e8f0",color:"#94a3b8",fontSize:13},children:"접수된 예산서가 없습니다. 신규 예산서를 생성해 주세요."}):m==="card"?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16},children:re.map(s=>e.jsx(Ct,{item:s,rank:pe[s.id],canManage:i,handleGoDetail:x,setVersion:r,setIsEditModalOpen:k,handleDeleteVersion:B,progressData:b,summaryVersionId:o,isSelected:R.includes(s.id),onToggleSelect:()=>F(s.id)},s.id))}):e.jsx("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:920},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[i&&e.jsx("th",{style:{...q,width:40,textAlign:"center"},children:e.jsx("div",{onClick:D,style:{width:18,height:18,borderRadius:4,background:R.length===t.length&&t.length>0?"#2563eb":"#fff",border:`2px solid ${R.length===t.length&&t.length>0?"#2563eb":"#cbd5e1"}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",margin:"0 auto"},children:R.length===t.length&&t.length>0&&e.jsx(ge,{size:12,color:"#fff",strokeWidth:4})})}),e.jsxs("th",{style:H,onClick:()=>N("name"),children:["예산명",V("name")]}),e.jsxs("th",{style:H,onClick:()=>N("year"),children:["연도",V("year")]}),e.jsxs("th",{style:H,onClick:()=>N("round"),children:["회차",V("round")]}),e.jsxs("th",{style:H,onClick:()=>N("status"),children:["상태",V("status")]}),e.jsxs("th",{style:H,onClick:()=>N("start_date"),children:["시작일",V("start_date")]}),e.jsxs("th",{style:H,onClick:()=>N("end_date"),children:["종료일",V("end_date")]}),e.jsx("th",{style:{...q,width:110},children:"D-day"}),e.jsx("th",{style:{...q,width:110},children:"지침"}),e.jsx("th",{style:{...q,width:150,textAlign:"center"},children:"관리"})]})}),e.jsx("tbody",{children:re.map(s=>{const d=fe[s.status]||fe.DRAFT,g=ye(s.end_date),h=s.status==="CLOSED";return e.jsxs("tr",{style:{opacity:h?.72:1,background:R.includes(s.id)?"#eff6ff":"transparent"},children:[i&&e.jsx("td",{style:{...A,textAlign:"center"},children:e.jsx("div",{onClick:()=>F(s.id),style:{width:18,height:18,borderRadius:4,background:R.includes(s.id)?"#2563eb":"#fff",border:`2px solid ${R.includes(s.id)?"#2563eb":"#cbd5e1"}`,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",margin:"0 auto"},children:R.includes(s.id)&&e.jsx(ge,{size:12,color:"#fff",strokeWidth:4})})}),e.jsx("td",{style:A,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx("strong",{style:{color:"#0f172a"},children:s.name}),e.jsxs("span",{style:{fontSize:11,color:"#94a3b8"},children:["ID ",s.id]})]})}),e.jsx("td",{style:A,children:s.year}),e.jsx("td",{style:A,children:s.round??0}),e.jsx("td",{style:A,children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:999,background:d.bg,color:d.color,border:"1px solid "+d.border,fontSize:11,fontWeight:700},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:d.dot,display:"inline-block"}}),d.label]})}),e.jsx("td",{style:A,children:s.start_date||"-"}),e.jsx("td",{style:A,children:s.end_date||"-"}),e.jsx("td",{style:A,children:g?e.jsx("span",{style:{fontSize:11,fontWeight:800,padding:"2px 8px",borderRadius:999,background:g.bg,color:g.color,border:"1px solid "+g.border},children:g.label}):"-"}),e.jsx("td",{style:A,children:s.guidelines?e.jsx("span",{style:{color:"#1d4ed8",fontWeight:700,fontSize:12},children:"있음"}):e.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:"없음"})}),e.jsx("td",{style:{...A,textAlign:"center"},children:e.jsxs("div",{style:{display:"inline-flex",gap:4},children:[e.jsx(G,{title:"상세 보기",color:"#2563eb",bg:"#eff6ff",onClick:()=>x(s),children:e.jsx(We,{size:13})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"수정",color:"#0369a1",bg:"#f0f9ff",onClick:()=>{r(s),k(!0)},children:e.jsx(Le,{size:13})}),h?e.jsx(G,{title:"재개",color:"#059669",bg:"#ecfdf5",onClick:()=>p(s),children:e.jsx(be,{size:13})}):e.jsx(G,{title:"마감",color:"#b45309",bg:"#fffbeb",onClick:()=>P(s),children:e.jsx(he,{size:13})}),e.jsx(G,{title:"삭제",color:"#dc2626",bg:"#fef2f2",onClick:()=>B(s),children:e.jsx(ce,{size:13})})]})]})})]},s.id)})})]})})]}),i&&R.length>0&&e.jsxs("div",{style:{position:"fixed",bottom:30,left:"50%",transform:"translateX(-50%)",zIndex:1e3,background:"#1e293b",padding:"12px 24px",borderRadius:16,boxShadow:"0 20px 25px -5px rgba(0,0,0,0.2), 0 10px 10px -5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:20,color:"#fff",animation:"slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[e.jsx("style",{children:`
                        @keyframes slideUp {
                            from { transform: translate(-50%, 100%); opacity: 0; }
                            to { transform: translate(-50%, 0); opacity: 1; }
                        }
                    `}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:6,background:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(_t,{size:14})}),e.jsxs("span",{style:{fontSize:14,fontWeight:700},children:[e.jsxs("span",{style:{color:"#60a5fa"},children:[R.length,"개"]})," 선택됨"]})]}),e.jsx("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{onClick:async()=>{w(R,"PENDING"),z([])},style:{background:"#334155",border:"1px solid #475569",color:"#fff",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},children:[e.jsx(be,{size:14})," 접수 개시"]}),e.jsxs("button",{onClick:async()=>{w(R,"CLOSED"),z([])},style:{background:"#334155",border:"1px solid #475569",color:"#fff",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},children:[e.jsx(he,{size:14})," 일괄 마감"]}),e.jsxs("button",{onClick:async()=>{await y(R),z([])},style:{background:"#991b1b",border:"none",color:"#fff",padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:6},children:[e.jsx(ce,{size:14})," 일괄 삭제"]})]}),e.jsx("button",{onClick:()=>z([]),style:{background:"transparent",border:"none",color:"#94a3b8",padding:4,cursor:"pointer",marginLeft:10},title:"선택 해제",children:e.jsx(st,{size:18})})]})]})}function xe({icon:t,iconBg:r,label:i,value:S,sub:x}){return e.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",padding:"16px 20px",boxShadow:"0 1px 3px rgba(15,23,42,0.05)",display:"flex",flexDirection:"column",gap:4},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:9,background:r,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:"#64748b",letterSpacing:"0.04em"},children:i})]}),e.jsx("div",{style:{fontSize:26,fontWeight:900,color:"#0f172a",lineHeight:1},children:S}),x]})}function oe({color:t,children:r}){return e.jsx("span",{style:{fontSize:11,fontWeight:700,color:t},children:r})}const l={pageTitle:"접수 관리",listTitle:"접수 목록",detailTitle:"접수 상세",masterTitle:"예산서 마스터",roundDetail:"회차 상세",round:"회차",inputPeriod:"입력 기간",newRoundBtn:"신규 예산서 접수",editRoundBtn:"회차 정보 수정",refreshStatus:"현황 새로고침",goToList:"목록으로",progressByDept:"부서별 진행 현황",bulkUploadTitle:"예산 항목 일괄 등록",exportOfficialBook:"공식 예산서 출력",no:"번호",year:"연도",name:"예산명",period:"기간",status:"상태",currentStatus:"현재 상태",statusControl:"상태 제어",management:"관리",dept:"부서",entryCount:"항목 수",totalAmount:"예산 합계",sourceRound:"기초데이터 원본",draft:"준비중",pending:"제출대기",confirmed:"확정",closed:"마감",active:"진행",applyYear:"적용 연도",roundName:"예산명칭",createMode:"기초데이터 설정",newCreate:"빈 상태로 시작",copyRound:"기존 회차 불러오기",originalRound:"불러올 회차",selectOriginal:"원본 회차 선택",copyNotice:"불러온 데이터는 당초 예산액 기준으로 저장되며, 증감액은 현예산액과 기존 예산액의 차이로 표시됩니다.",periodSetting:"입력 접수 기간 설정",guidelinesLabel:"부서별 작성 지침(공통)",guidelinesPlaceholder:"예산 작성 시 부서에서 참고할 지침을 입력하세요.",fileUploadLabel:"첨부 파일 등록",currentFile:"현재 파일: ",uploadPlaceholder:"파일을 드래그하거나 클릭하여 업로드하세요.",removeFile:"파일 제거",searchPlaceholder:"사업명 검색..",namePlaceholder:"예: 2027년 본예산",bulkFormat:"형식: `subject_code, org_code, name, price, qty` (콤마 구분, 줄 단위)",bulkExample:"예: 1101, D001, 사무용품, 50000, 2",noData:"표시할 데이터가 없습니다.",noProgressData:"표시할 진행 현황 데이터가 없습니다.",loadingProgress:"진행 현황을 불러오는 중...",periodUndefined:"기간 미정",save:"저장",cancel:"취소",delete:"삭제",deactivate:"비활성화",edit:"수정",view:"보기",upload:"업로드 실행",confirmDelete:t=>`"${t}" 버전을 삭제하시겠습니까? 관련 데이터도 모두 삭제됩니다.`,deleteSuccess:"삭제했습니다.",deleteFail:"삭제 실패",alreadyClosed:"이미 마감된 버전입니다.",confirmDeactivate:t=>`"${t}" 버전을 비활성화(마감)하시겠습니까?`,deactivateSuccess:"비활성화했습니다.",changeFail:"변경 실패",transferRequired:"기초데이터 불러오기를 선택한 경우 원본 회차를 선택해야 합니다.",newRoundName:t=>`${t}년 신규 회차`,createSuccess:t=>`신규 예산서가 접수되었습니다.${t>0?`
불러온 항목: ${t.toLocaleString()}건`:""}`,createFail:"생성 실패",updateSuccess:"버전 정보가 업데이트되었습니다.",updateFail:"상태 변경 실패",saveSuccess:"버전 정보가 저장되었습니다.",saveFail:"저장 실패",inputRequired:"항목을 입력해 주세요.",uploadSuccess:(t,r)=>`업로드 완료: ${t} 생성, ${r} 업데이트`,uploadFail:"업로드 실패",exportOfficialBookDone:"공식 예산서 파일을 다운로드했습니다.",exportOfficialBookFail:"공식 예산서 출력 중 오류가 발생했습니다.",sourceVersionEmpty:"선택한 원본 회차에 예산 항목이 없습니다. 다른 회차를 선택하거나 빈 상태로 시작하세요.",closeSuccess:"회차를 마감했습니다.",closeFail:"마감 처리 중 오류가 발생했습니다.",reopenSuccess:"마감을 해제했습니다.",reopenFail:"마감 해제 중 오류가 발생했습니다.",confirmClose:t=>`"${t}" 회차를 마감합니까?
마감 후에는 모든 편집이 잠깁니다.`,confirmReopen:t=>`"${t}" 회차의 마감을 해제합니까?`,summaryTotalRounds:"전체 예산서",summaryActiveRound:"진행 중 회차",summaryDeptStatus:"부서 현황",summaryCompleted:"완료",summaryInProgress:"진행중",summaryNotStarted:"미시작",summaryTotalEntries:"전체 항목",summaryTotalAmount:"합계 금액",summaryDeadline:"마감 기한",summaryNoPending:"진행 중인 회차 없음",totalEntries:"전체 항목 수",totalSum:"전체 예산 합계"},{menuGhostBtn:Rt}=me,ie={...Rt,padding:"8px 14px",borderRadius:10,fontSize:13,fontWeight:700,display:"inline-flex",alignItems:"center",gap:6},Ee=t=>{if(!t)return"-";const r=new Date(t);return Number.isNaN(r.getTime())?String(t):r.toLocaleDateString("ko-KR")},ae={COMPLETED:{bg:"#f0fdf4",border:"#bbf7d0",color:"#166534",barColor:"#10b981",label:"완료"},SUBMITTED:{bg:"#eff6ff",border:"#bfdbfe",color:"#1d4ed8",barColor:"#3b82f6",label:"제출됨"},WRITING:{bg:"#fffbeb",border:"#fde68a",color:"#b45309",barColor:"#f59e0b",label:"작성중"},NOT_STARTED:{bg:"#f8fafc",border:"#e2e8f0",color:"#94a3b8",barColor:"#cbd5e1",label:"미시작"},EMPTY:{bg:"#f8fafc",border:"#e2e8f0",color:"#cbd5e1",barColor:"#e2e8f0",label:"항목없음"}};function Tt(t){if(!t.length)return 0;const r=t.filter(i=>i.dept_status==="COMPLETED").length;return Math.round(r/t.length*100)}function se({icon:t,iconColor:r,iconBg:i,label:S,value:x,sub:k}){return e.jsxs("div",{style:{background:"#fff",border:"1px solid #e8edf5",borderRadius:14,padding:"14px 18px",display:"flex",alignItems:"flex-start",gap:14,boxShadow:"0 1px 3px rgba(0,0,0,0.04)"},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:10,background:i,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:De.cloneElement(t,{size:17,style:{color:r}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#94a3b8",letterSpacing:"0.04em",marginBottom:3},children:S}),e.jsx("div",{style:{fontSize:15,fontWeight:800,color:"#0f172a",lineHeight:1.3},children:x}),k&&e.jsx("div",{style:{marginTop:4},children:k})]})]})}function Et({rate:t}){const r=t===100?"#059669":t>=60?"#2563eb":"#f59e0b",i=t===100?"#ecfdf5":t>=60?"#eff6ff":"#fffbeb";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,background:i,border:`1px solid ${r}22`,borderRadius:12,padding:"10px 16px"},children:[e.jsx("div",{style:{flex:1},children:e.jsx("div",{style:{height:8,borderRadius:99,background:"#e2e8f0",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:t===100?"linear-gradient(90deg,#10b981,#059669)":"linear-gradient(90deg,#60a5fa,#2563eb)",width:`${t}%`,transition:"width 0.5s ease"}})})}),e.jsxs("span",{style:{fontSize:15,fontWeight:900,color:r,minWidth:44,textAlign:"right"},children:[t,"%"]})]})}function It({version:t,canManage:r,setViewMode:i,fetchProgress:S,progressData:x=[],loadingProgress:k,setIsEditModalOpen:P,onExportBudgetBook:p,onClose:B,onReopen:$}){const b=x.reduce((u,a)=>u+Number(a.total_entries||0),0),o=x.reduce((u,a)=>u+Number(a.total_amount||0),0),y=Tt(x),w=t?.status==="CLOSED",[R,z]=f.useState({}),F=u=>z(a=>({...a,[u]:!a[u]})),D=x.filter(u=>u.dept_status==="COMPLETED").length,T=x.filter(u=>["WRITING","SUBMITTED"].includes(u.dept_status)).length,E=f.useMemo(()=>{const u={};return x.forEach(a=>{const j=a.org_id,m=a.parent_id,v=m||j;u[v]||(u[v]={dept:null,teams:[]}),m?u[v].teams.push({...a}):u[v].dept={...a}}),Object.values(u).map(a=>{if(!a.dept){if(!a.teams.length)return null;a.dept={...a.teams[0],org_name:`${a.teams[0].org_name} (그룹)`,isPlaceholder:!0}}if(a.teams.length>0){const j=a.teams.reduce((v,W)=>(v.total_entries+=Number(W.total_entries||0),v.total_amount+=Number(W.total_amount||0),v.finalized+=Number(W.status_counts?.FINALIZED||0),v),{total_entries:Number(a.dept.total_entries||0),total_amount:Number(a.dept.total_amount||0),finalized:Number(a.dept.status_counts?.FINALIZED||0)});a.dept.total_entries=j.total_entries,a.dept.total_amount=j.total_amount;const m=j.total_entries>0?Math.round(j.finalized/j.total_entries*100):0;a.dept.aggregatedBarPct=m,j.total_entries>0&&(m===100?a.dept.dept_status="COMPLETED":m>0?a.dept.dept_status="SUBMITTED":a.dept.dept_status="WRITING")}else{const j=Number(a.dept.total_entries||0),m=Number(a.dept.status_counts?.FINALIZED||0);a.dept.aggregatedBarPct=j>0?Math.round(m/j*100):0}return a}).filter(Boolean).sort((a,j)=>(a.dept.org_name||"").localeCompare(j.dept.org_name||""))},[x]),L=u=>{window.location.assign(`/api/versions/${t.id}/export-department-budget/?org_id=${u}`)};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:10,background:"#fff",border:"1px solid #e2e8f0",borderRadius:14,padding:"14px 20px",boxShadow:"0 1px 3px rgba(0,0,0,0.04)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsxs("button",{type:"button",style:ie,onClick:()=>i("list"),children:[e.jsx(ct,{size:14})," ",l.goToList]}),e.jsx("div",{style:{width:1,height:20,background:"#e2e8f0"}}),e.jsxs("span",{style:{fontSize:15,fontWeight:800,color:"#0f172a"},children:[t?.year,"년 ",t?.name]}),e.jsx(rt,{status:t?.status,type:"version"})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("button",{type:"button",style:ie,onClick:()=>S(),children:[e.jsx(we,{size:14})," ",l.refreshStatus]}),e.jsxs("button",{type:"button",style:ie,onClick:p,children:[e.jsx(Ce,{size:14})," ",l.exportOfficialBook]}),r&&e.jsxs("button",{type:"button",style:ie,onClick:()=>P(!0),children:[e.jsx(Xe,{size:14})," ",l.editRoundBtn]}),r&&t&&(w?e.jsxs("button",{type:"button",onClick:()=>$?.(t),style:{...ie,border:"1px solid #86efac",background:"#f0fdf4",color:"#166534"},children:[e.jsx(et,{size:14})," 마감 해제"]}):e.jsxs("button",{type:"button",onClick:()=>B?.(t),style:{...ie,border:"1px solid #fca5a5",background:"#fff1f2",color:"#b91c1c"},children:[e.jsx(Ke,{size:14})," 회차 마감"]}))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:12},children:[e.jsx(se,{icon:e.jsx(bt,{}),iconColor:"#6366f1",iconBg:"#eef2ff",label:"예산 회차",value:`${t?.year}년 / ${t?.name||`${t?.round??0}차`}`}),e.jsx(se,{icon:e.jsx(Me,{}),iconColor:"#0ea5e9",iconBg:"#f0f9ff",label:"입력 기간",value:`${Ee(t?.start_date)} ~ ${Ee(t?.end_date)}`}),e.jsx(se,{icon:e.jsx(je,{}),iconColor:"#f59e0b",iconBg:"#fffbeb",label:"총 예산 항목",value:`${b.toLocaleString()}건`}),e.jsx(se,{icon:e.jsx(lt,{}),iconColor:"#10b981",iconBg:"#ecfdf5",label:"총 예산 금액",value:o>0?`${o.toLocaleString()}원`:"집계 전"}),e.jsx(se,{icon:e.jsx(Ne,{}),iconColor:"#059669",iconBg:"#ecfdf5",label:"부서 완료 현황",value:x.length>0?`${D} / ${x.length}`:"—",sub:x.length>0&&e.jsxs("div",{style:{display:"flex",gap:8,fontSize:11},children:[e.jsxs("span",{style:{color:"#059669",fontWeight:700},children:["완료 ",D]}),e.jsxs("span",{style:{color:"#d97706",fontWeight:700},children:["진행 ",T]}),e.jsxs("span",{style:{color:"#94a3b8"},children:["미시작 ",x.length-D-T]})]})}),e.jsx(se,{icon:e.jsx(ot,{}),iconColor:"#2563eb",iconBg:"#eff6ff",label:"전체 완료율",value:x.length>0?`${y}%`:"—",sub:x.length>0&&e.jsx("div",{style:{height:5,borderRadius:99,background:"#e2e8f0",overflow:"hidden",marginTop:6},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:y===100?"linear-gradient(90deg,#10b981,#059669)":"linear-gradient(90deg,#60a5fa,#2563eb)",width:`${y}%`,transition:"width 0.5s"}})})})]}),e.jsxs("div",{style:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:16,overflow:"hidden",boxShadow:"0 1px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{padding:"16px 22px",borderBottom:"1px solid #f1f5f9",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#f8fafc"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14,fontWeight:800,color:"#0f172a"},children:[e.jsx(we,{size:16,style:{color:"#3b82f6"}}),l.progressByDept]}),x.length>0&&e.jsx("div",{style:{minWidth:220},children:e.jsx(Et,{rate:y})})]}),k?e.jsx("div",{style:{padding:60},children:e.jsx(Ze,{message:l.loadingProgress})}):e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"#f8fafc",borderBottom:"2px solid #e2e8f0"},children:[{label:l.dept,align:"left",pl:22},{label:l.status,align:"center",w:100},{label:"진행률",align:"left",w:180},{label:l.entryCount,align:"right"},{label:l.totalAmount,align:"right"},{label:"출력",align:"right",pr:22}].map(({label:u,align:a,w:j,pl:m,pr:v})=>e.jsx("th",{style:{padding:"10px 14px",...m?{paddingLeft:m}:{},...v?{paddingRight:v}:{},...j?{width:j}:{},textAlign:a,fontSize:11,fontWeight:700,color:"#64748b",letterSpacing:"0.04em",whiteSpace:"nowrap"},children:u},u))})}),e.jsx("tbody",{children:E.length?E.map((u,a)=>{const j=u.dept,m=ae[j.dept_status]||ae.NOT_STARTED,v=j.aggregatedBarPct??0,W=R[j.org_id],M=u.teams.length>0;return e.jsxs(De.Fragment,{children:[e.jsxs("tr",{style:{background:a%2===0?"#fff":"#fafbfc",borderBottom:"1px solid #f1f5f9",cursor:M?"pointer":"default",transition:"background 0.12s"},onMouseEnter:_=>{_.currentTarget.style.background="#f0f4ff"},onMouseLeave:_=>{_.currentTarget.style.background=a%2===0?"#fff":"#fafbfc"},onClick:()=>M&&F(j.org_id),children:[e.jsx("td",{style:{padding:"11px 14px",paddingLeft:22,fontWeight:700,color:"#0f172a",fontSize:13},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:7},children:[M?W?e.jsx(tt,{size:13,style:{color:"#64748b",flexShrink:0}}):e.jsx(at,{size:13,style:{color:"#64748b",flexShrink:0}}):e.jsx("div",{style:{width:13}}),j.org_name||"-",M&&e.jsxs("span",{style:{fontSize:10,fontWeight:700,color:"#94a3b8",background:"#f1f5f9",borderRadius:4,padding:"1px 5px"},children:[u.teams.length,"팀"]})]})}),e.jsx("td",{style:{padding:"11px 14px",textAlign:"center"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:11,fontWeight:700,padding:"3px 9px",borderRadius:999,background:m.bg,color:m.color,border:`1px solid ${m.border}`},children:[e.jsx("span",{style:{width:5,height:5,borderRadius:"50%",background:m.barColor,display:"inline-block"}}),m.label]})}),e.jsx("td",{style:{padding:"11px 14px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:7,borderRadius:99,background:"#f1f5f9",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:j.dept_status==="COMPLETED"?"linear-gradient(90deg,#10b981,#059669)":`linear-gradient(90deg,${m.barColor}99,${m.barColor})`,width:`${v}%`,transition:"width 0.4s"}})}),e.jsxs("span",{style:{fontSize:11,fontWeight:800,color:m.color,minWidth:34,textAlign:"right"},children:[v,"%"]})]})}),e.jsx("td",{style:{padding:"11px 14px",textAlign:"right",fontSize:13,color:"#334155",fontVariantNumeric:"tabular-nums"},children:Number(j.total_entries||0).toLocaleString()}),e.jsx("td",{style:{padding:"11px 14px",textAlign:"right",fontSize:13,fontWeight:700,color:"#0f172a",fontVariantNumeric:"tabular-nums"},children:Number(j.total_amount||0).toLocaleString()}),e.jsx("td",{style:{padding:"11px 14px",paddingRight:22,textAlign:"right"},children:e.jsxs("button",{onClick:_=>{_.stopPropagation(),L(j.org_id)},style:{display:"inline-flex",alignItems:"center",gap:5,fontSize:11,fontWeight:700,padding:"5px 12px",borderRadius:7,background:"#fff",border:"1px solid #e2e8f0",color:"#334155",cursor:"pointer",transition:"all 0.15s"},onMouseEnter:_=>{_.currentTarget.style.borderColor="#2563eb",_.currentTarget.style.color="#2563eb"},onMouseLeave:_=>{_.currentTarget.style.borderColor="#e2e8f0",_.currentTarget.style.color="#334155"},children:[e.jsx(Ce,{size:12})," 예산서"]})})]}),W&&u.teams.map(_=>{const O=ae[_.dept_status]||ae.NOT_STARTED,I=Number(_.total_entries||0),K=Number(_.status_counts?.FINALIZED||0),N=I>0?Math.round(K/I*100):0;return e.jsxs("tr",{style:{background:"#f8fafc",borderBottom:"1px solid #f1f5f9"},children:[e.jsx("td",{style:{padding:"9px 14px 9px 44px",color:"#475569",fontSize:12},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{color:"#cbd5e1"},children:"└"}),_.org_name||"-"]})}),e.jsx("td",{style:{padding:"9px 14px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",fontSize:10,fontWeight:700,padding:"2px 7px",borderRadius:999,background:O.bg,color:O.color,border:`1px solid ${O.border}`},children:O.label})}),e.jsx("td",{style:{padding:"9px 14px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{flex:1,height:5,borderRadius:99,background:"#e2e8f0",overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",borderRadius:99,background:O.barColor,width:`${N}%`}})}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:O.color,minWidth:34,textAlign:"right"},children:[N,"%"]})]})}),e.jsx("td",{style:{padding:"9px 14px",textAlign:"right",fontSize:12,color:"#475569",fontVariantNumeric:"tabular-nums"},children:I.toLocaleString()}),e.jsx("td",{style:{padding:"9px 14px",textAlign:"right",fontSize:12,fontWeight:600,color:"#334155",fontVariantNumeric:"tabular-nums"},children:Number(_.total_amount||0).toLocaleString()}),e.jsx("td",{})]},_.org_id)})]},a)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{padding:32,textAlign:"center",color:"#94a3b8",fontSize:13},children:l.noProgressData})})})]})]})]})}const{simpleLabel:ee,simpleInput:de,simpleSelect:Ie,simpleTextarea:zt}=me;function ze({data:t,setData:r,currentFileUrl:i,isCreate:S=!1,fileInputId:x,transferSourceOptions:k}){const[P,p]=f.useState(t.name||""),[B,$]=f.useState(t.guidelines||"");f.useEffect(()=>{queueMicrotask(()=>{p(t.name||"")})},[t.name]),f.useEffect(()=>{queueMicrotask(()=>{$(t.guidelines||"")})},[t.guidelines]);const b=(o,y)=>{r(w=>({...w,[o]:y}))};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:24,padding:"10px 0"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:16,alignItems:"center"},children:[e.jsx("label",{style:{...ee,margin:0},children:l.applyYear}),e.jsx("input",{type:"number",style:{...de,borderRadius:10},value:t.year,onChange:o=>{const y=parseInt(o.target.value);r(w=>({...w,year:y}))}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:16,alignItems:"center"},children:[e.jsx("label",{style:{...ee,margin:0},children:l.roundName}),e.jsx("input",{style:{...de,borderRadius:10},placeholder:l.namePlaceholder,value:P,onChange:o=>{const y=o.target.value;p(y)},onCompositionEnd:o=>{b("name",o.currentTarget.value)},onBlur:o=>{b("name",o.target.value)}})]}),S&&e.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:20,display:"grid",gap:14},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:16,alignItems:"center"},children:[e.jsx("label",{style:{...ee,margin:0},children:l.createMode}),e.jsxs("select",{style:{...Ie,borderRadius:10},value:t.creation_mode||"NEW",onChange:o=>{const y=o.target.value;r(w=>({...w,creation_mode:y,source_version_id:y==="TRANSFER"?w.source_version_id:""}))},children:[e.jsx("option",{value:"NEW",children:l.newCreate}),e.jsx("option",{value:"TRANSFER",children:l.copyRound})]})]}),t.creation_mode==="TRANSFER"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:16,alignItems:"center"},children:[e.jsx("label",{style:{...ee,margin:0},children:l.originalRound}),e.jsxs("select",{style:{...Ie,borderRadius:10},value:t.source_version_id||"",onChange:o=>{const y=o.target.value;r(w=>({...w,source_version_id:y}))},children:[e.jsx("option",{value:"",children:l.selectOriginal}),k.map(o=>e.jsxs("option",{value:o.id,children:[o.year," ",o.name," (",o.round??0,"차)"]},o.id))]})]}),t.creation_mode==="TRANSFER"&&e.jsx("div",{style:{fontSize:12,color:"#64748b",paddingLeft:116},children:l.copyNotice})]}),e.jsxs("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:20},children:[e.jsx("label",{style:{...ee,marginBottom:8,display:"block"},children:l.periodSetting}),e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[e.jsx("input",{type:"date",style:{...de,borderRadius:10,flex:1},value:t.start_date,onChange:o=>{const y=o.target.value;r(w=>({...w,start_date:y}))}}),e.jsx("span",{style:{color:"#94a3b8"},children:"~"}),e.jsx("input",{type:"date",style:{...de,borderRadius:10,flex:1},value:t.end_date,onChange:o=>{const y=o.target.value;r(w=>({...w,end_date:y}))}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...ee,marginBottom:8,display:"block"},children:l.guidelinesLabel}),e.jsx("textarea",{style:{...zt,height:120,borderRadius:12,padding:16},value:B,onChange:o=>{const y=o.target.value;$(y)},onCompositionEnd:o=>{b("guidelines",o.currentTarget.value)},onBlur:o=>{b("guidelines",o.target.value)},placeholder:l.guidelinesPlaceholder})]}),e.jsxs("div",{children:[e.jsx("label",{style:{...ee,marginBottom:8,display:"block"},children:l.fileUploadLabel}),e.jsxs("div",{style:{border:"2px dashed #e2e8f0",borderRadius:12,padding:"20px",textAlign:"center",cursor:"pointer",transition:"all 0.2s",position:"relative"},onClick:()=>document.getElementById(x).click(),children:[e.jsx(nt,{size:24,color:"#94a3b8",style:{marginBottom:8}}),e.jsx("div",{style:{fontSize:13,color:"#64748b"},children:t.file?t.file.name:i?`${l.currentFile}${i.split("/").pop()}`:l.uploadPlaceholder}),e.jsx("input",{id:x,type:"file",style:{display:"none"},onChange:o=>{const y=o.target.files[0];r(w=>({...w,file:y}))}}),(t.file||i)&&e.jsx("button",{type:"button",style:{position:"absolute",top:10,right:10,background:"none",border:"none",cursor:"pointer",color:"#ef4444"},onClick:o=>{o.stopPropagation(),r(y=>({...y,file:null}))},title:l.removeFile,children:e.jsx(ce,{size:16})})]})]})]})}function Ft({menuId:t,authAxios:r,version:i,versions:S,setVersion:x,onBootstrap:k,user:P,modalApi:p,initialUrlParams:B={}}){const $=()=>({year:new Date().getFullYear(),name:"",start_date:"",end_date:"",guidelines:"",file:null,creation_mode:"NEW",source_version_id:""}),[b,o]=f.useState(()=>B.versionId?"detail":"list"),[y,w]=f.useState({}),[,R]=f.useState(null),[z,F]=f.useState([]),[D,T]=f.useState(!1),[E,L]=f.useState(null),[u,a]=f.useState(!1),[j,m]=f.useState(!1),[v,W]=f.useState(null),[M,_]=f.useState(""),O=f.useRef(null),[I,K]=f.useState($()),[N,V]=f.useState({year:"",name:"",start_date:"",end_date:"",guidelines:""}),[re,pe]=f.useState(!1),[q,H]=f.useState(""),[,A]=f.useState(null),s=P?.role==="ADMIN",d=f.useCallback(async n=>{const c=n||i?.id;if(c){T(!0);try{const C=await r.get(`/api/versions/${c}/progress/`);F(C.data)}catch(C){console.error(C)}finally{T(!1)}}},[r,i?.id]);f.useEffect(()=>{const n={};S.forEach(c=>{n[c.id]=c.status}),w(n)},[S]),f.useEffect(()=>{if(b==="list"){const n=S.find(c=>["PENDING","DRAFT","EXPIRED"].includes(c.status));n&&n.id!==E&&(L(n.id),d(n.id))}},[b,S,E,d]),f.useEffect(()=>{i&&i.id&&(b==="detail"&&d(i.id),V({year:i.year,name:i.name,start_date:i.start_date||"",end_date:i.end_date||"",guidelines:i.guidelines||""}))},[i,b,d]);const g=f.useRef(!1);f.useEffect(()=>{if(g.current||!S.length)return;const n=B.versionId;if(!n)return;const c=S.find(C=>C.id===n);c&&(x(c),o("detail")),g.current=!0},[S,B.versionId,x]),f.useEffect(()=>{if(b==="detail"&&i?.id){const n=`/intake/versions/${i.id}`;window.location.pathname!==n&&window.history.pushState({},"",n)}else b==="list"&&window.location.pathname!=="/intake"&&window.history.pushState({},"","/intake")},[b,i?.id]);const h=f.useMemo(()=>[...S].sort((n,c)=>c.year-n.year||c.round-n.round),[S]),te=async n=>{if(await p.confirm(l.confirmDelete(n.name)))try{await r.delete(`/api/versions/${n.id}/`),await k(),await p.alert(l.deleteSuccess)}catch(c){if(c.response?.status===409&&c.response?.data?.can_force){const C=c.response.data.entry_count;_(""),W({version:n,entryCount:C}),setTimeout(()=>O.current?.focus(),80)}else await p.alert(U(c,l.deleteFail))}},Se=async()=>{if(v)try{await r.delete(`/api/versions/${v.version.id}/force-delete/`),W(null),await k(),await p.alert(l.deleteSuccess)}catch(n){await p.alert(U(n,l.deleteFail))}},ke=async n=>{if(await p.confirm(l.confirmClose(n.name)))try{await r.post(`/api/versions/${n.id}/close/`),await k(),await p.alert(l.closeSuccess)}catch(c){await p.alert(U(c,l.closeFail))}},_e=async n=>{if(await p.confirm(l.confirmReopen(n.name)))try{await r.post(`/api/versions/${n.id}/reopen/`),await k(),await p.alert(l.reopenSuccess)}catch(c){await p.alert(U(c,l.reopenFail))}},Pe=async()=>{try{if(I.creation_mode==="TRANSFER"&&!I.source_version_id){await p.alert(l.transferRequired);return}const n=new FormData;n.append("year",I.year),n.append("name",I.name||l.newRoundName(I.year)),n.append("start_date",I.start_date),n.append("end_date",I.end_date),n.append("guidelines",I.guidelines),n.append("creation_mode",I.creation_mode||"NEW"),n.append("base_data_mode",(I.creation_mode||"NEW")==="TRANSFER"?"IMPORT_PREVIOUS":"NEW"),I.source_version_id&&(n.append("source_version_id",I.source_version_id),n.append("base_version_id",I.source_version_id)),I.file&&n.append("guidelines_file",I.file);const c=await r.post("/api/versions/create_next_round/",n,{headers:{"Content-Type":"multipart/form-data"}});await k(),a(!1),K($());const C=Number(c?.data?.cloned_count||0);await p.alert(l.createSuccess(C))}catch(n){const C=n?.response?.data?.error==="source version has no entries"?l.sourceVersionEmpty:U(n,l.createFail);await p.alert(C)}},Be=async n=>{const c=y[n.id];if(!(!c||c===n.status)){R(n.id);try{await r.patch(`/api/versions/${n.id}/`,{status:c,confirmed_at:c==="CONFIRMED"?new Date().toISOString():null}),await k(),await p.alert(l.updateSuccess)}catch(C){await p.alert(U(C,l.updateFail))}finally{R(null)}}},Fe=async()=>{if(i)try{const n=new FormData;n.append("year",N.year),n.append("name",N.name),n.append("start_date",N.start_date),n.append("end_date",N.end_date),n.append("guidelines",N.guidelines),N.file?n.append("guidelines_file",N.file):N.file===null&&i.guidelines_file&&n.append("guidelines_file","");const c=await r.patch(`/api/versions/${i.id}/`,n,{headers:{"Content-Type":"multipart/form-data"}});x(c.data),await k(),m(!1),V({year:"",name:"",start_date:"",end_date:"",guidelines:"",file:null}),await p.alert(l.saveSuccess)}catch(n){await p.alert(U(n,l.saveFail))}},Oe=async()=>{if(!q.trim())return p.alert(l.inputRequired);try{const c=q.trim().split(`
`).map(Y=>{const[Z,J,le,Q,qe]=Y.split(",").map(He=>He.trim());return{subject_code:Z,org_code:J,details:[{name:le,price:parseInt(Q)||0,qty:parseFloat(qe)||0,freq:1,source:"자체"}]}}).filter(Y=>Y.subject_code&&Y.org_code),C=await r.post("/api/entries/bulk-upsert/",{year:i.year,round:i.round||0,entries:c});A(C.data),await k(),H(""),await p.alert(l.uploadSuccess(C.data.created,C.data.updated)),d(i.id)}catch(n){await p.alert(U(n,l.uploadFail))}},Ae=async n=>{if(n?.length&&await p.confirm(`선택한 ${n.length}개의 예산서를 삭제하시겠습니까?`))try{const c=await r.post("/api/versions/bulk-delete/",{ids:n}),C=c.data.deleted_ids?.length||0,Y=c.data.errors?.length||0;if(await k(),Y>0){const Z=c.data.errors.filter(J=>J.entry_count>0);Z.length>0?await p.confirm(`${Z.length}개의 예산서에 기존 데이터가 존재합니다. 강제로 삭제하시겠습니까?`)&&(await r.post("/api/versions/bulk-delete/",{ids:Z.map(J=>J.id),force:!0}),await k(),await p.alert("강제 삭제가 완료되었습니다.")):await p.alert(`${C}개 삭제 성공, ${Y}개 실패.`)}else await p.alert(`${C}개의 예산서가 삭제되었습니다.`)}catch(c){await p.alert(U(c,"일괄 삭제에 실패했습니다."))}},Ue=async(n,c)=>{if(n?.length)try{await r.post("/api/versions/bulk-update-status/",{ids:n,status:c}),await k(),await p.alert("상태 변경이 완료되었습니다.")}catch(C){await p.alert(U(C,"상태 변경에 실패했습니다."))}},Ve=n=>{x(n),o("detail")},Ge=async()=>{if(i?.id)try{const n=await r.get(`/api/versions/${i.id}/export-budget-book/`,{responseType:"blob"}),C=(n.headers?.["content-disposition"]||"").match(/filename\*=UTF-8''([^;]+)/i),Y=`budget_book_${i.year}_r${i.round}.xlsx`,Z=C?decodeURIComponent(C[1]):Y,J=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),le=window.URL.createObjectURL(J),Q=document.createElement("a");Q.href=le,Q.download=Z,document.body.appendChild(Q),Q.click(),Q.remove(),window.URL.revokeObjectURL(le),await p.alert(l.exportOfficialBookDone)}catch(n){await p.alert(U(n,l.exportOfficialBookFail))}};return e.jsxs(Je,{menuId:t,user:P,breadcrumbs:b==="detail"?[{label:l.pageTitle,onClick:()=>o("list")},{label:l.listTitle,onClick:()=>o("list")},`${l.detailTitle} (${i?.name||""})`]:[l.pageTitle,l.listTitle],contextBadge:i?`${i.year}년 ${i.name}`:"",actions:b==="list"&&s?[{label:l.newRoundBtn,onClick:()=>a(!0),icon:e.jsx($e,{size:16})}]:[],children:[e.jsx("div",{style:{padding:"0 20px 40px 20px"},children:b==="list"?e.jsx(vt,{versions:S,version:i,setVersion:x,setViewMode:o,canManage:s,statusById:y,setStatusById:w,saveVersionStatus:Be,handleGoDetail:Ve,setIsEditModalOpen:m,handleCloseVersion:ke,handleReopenVersion:_e,handleDeleteVersion:te,setIsCreateModalOpen:a,progressData:z,summaryVersionId:E,handleBatchDelete:Ae,handleBatchUpdateStatus:Ue}):e.jsx(It,{version:i,canManage:s,setViewMode:o,fetchProgress:d,progressData:z,loadingProgress:D,setIsEditModalOpen:m,handleBulkUpload:Oe,csvContent:q,setCsvContent:H,isBulkExpanded:re,setIsBulkExpanded:pe,onExportBudgetBook:Ge,onClose:ke,onReopen:_e})}),e.jsxs(ve,{isOpen:u,onClose:()=>a(!1),title:l.newRoundBtn,width:600,children:[e.jsx(ze,{data:I,setData:K,isCreate:!0,fileInputId:"version-file-input-create",transferSourceOptions:h}),e.jsx("div",{style:{paddingTop:20,borderTop:"1px solid #f1f5f9",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",style:{background:"#2563eb",color:"#fff",border:"none",padding:"12px 32px",borderRadius:12,fontWeight:800,cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(37,99,235,0.2)"},onClick:Pe,children:l.newRoundBtn})})]}),e.jsxs(ve,{isOpen:j,onClose:()=>m(!1),title:l.editRoundBtn,width:600,children:[e.jsx(ze,{data:N,setData:V,currentFileUrl:i?.guidelines_file,fileInputId:"version-file-input-edit"}),e.jsx("div",{style:{paddingTop:20,borderTop:"1px solid #f1f5f9",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",style:{background:"#10b981",color:"#fff",border:"none",padding:"12px 32px",borderRadius:12,fontWeight:800,cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(16,185,129,0.2)"},onClick:Fe,children:l.save})})]}),v&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,background:"rgba(15,23,42,0.55)",backdropFilter:"blur(3px)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{background:"#fff",borderRadius:20,width:480,maxWidth:"90vw",boxShadow:"0 25px 50px -12px rgba(0,0,0,0.35)",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",padding:"20px 24px",display:"flex",alignItems:"center",gap:12},children:[e.jsx(it,{size:22,color:"#fff"}),e.jsx("span",{style:{color:"#fff",fontWeight:800,fontSize:17},children:"예산서 강제 삭제"})]}),e.jsxs("div",{style:{padding:"24px 24px 20px"},children:[e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fca5a5",borderRadius:12,padding:"14px 16px",marginBottom:20},children:[e.jsx("p",{style:{margin:0,fontWeight:700,color:"#b91c1c",fontSize:14,marginBottom:6},children:"⚠ 이 작업은 되돌릴 수 없습니다"}),e.jsxs("p",{style:{margin:0,color:"#7f1d1d",fontSize:13,lineHeight:1.6},children:[e.jsxs("strong",{children:['"',v.version.name,'"']})," 예산서와 연결된"," ",e.jsxs("strong",{children:["예산 항목 ",v.entryCount.toLocaleString(),"건"]}),"이 모두 영구 삭제됩니다."]})]}),e.jsxs("p",{style:{margin:"0 0 10px",fontSize:13,color:"#475569",fontWeight:600},children:["계속하려면 아래 입력란에 ",e.jsx("code",{style:{background:"#f1f5f9",padding:"2px 7px",borderRadius:5,fontFamily:"monospace",fontWeight:800,color:"#dc2626",fontSize:13},children:"DELETE"})," 를 입력하세요."]}),e.jsx("input",{ref:O,type:"text",value:M,onChange:n=>_(n.target.value),onKeyDown:n=>{n.key==="Enter"&&M==="DELETE"&&Se()},placeholder:"DELETE",style:{width:"100%",boxSizing:"border-box",border:`2px solid ${M==="DELETE"?"#dc2626":"#e2e8f0"}`,borderRadius:10,padding:"10px 14px",fontSize:15,fontWeight:700,fontFamily:"monospace",outline:"none",color:"#0f172a",transition:"border-color 0.2s"}})]}),e.jsxs("div",{style:{padding:"0 24px 24px",display:"flex",gap:10,justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>{W(null),_("")},style:{padding:"10px 22px",borderRadius:10,border:"1px solid #e2e8f0",background:"#f8fafc",color:"#475569",fontWeight:700,cursor:"pointer",fontSize:14},children:"취소"}),e.jsx("button",{type:"button",disabled:M!=="DELETE",onClick:Se,style:{padding:"10px 22px",borderRadius:10,border:"none",background:M==="DELETE"?"#dc2626":"#fca5a5",color:"#fff",fontWeight:800,fontSize:14,cursor:M==="DELETE"?"pointer":"not-allowed",transition:"background 0.2s",boxShadow:M==="DELETE"?"0 4px 6px -1px rgba(220,38,38,0.3)":"none"},children:"강제 삭제"})]})]})})]})}export{Ft as default};
